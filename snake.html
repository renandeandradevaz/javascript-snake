<html>
	<head>
		<title>Snake</title>
		<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	</head>
	
	<body>
		<style>
		
			#perdeu-playboy{
				display: none;
				text-align: center;
				padding: 100px;
			}
			
			.game-container{
				border: 5px solid black;
				margin: auto;
			}
			
			.quadradinho{
				width: 10px;
				height: 10px;
			}
			
			.preenchido{
				background-color: black;
			}
		
		</style>

		<table class="game-container" >	
		</table>
		
		<div id='perdeu-playboy'>
			<h1> PERDEU PLAYBOY  </h1>
			<br>
			<h3> Pontuacao: </h3>
			<br>
			<a href="./snake.html"> Jogar novamente </a>
		</div>

	</body>
	
	<script>
	
		var larguraAlturaMaxima = 50; 
	
		var posicaoAtual = "10-10";
		var direcao = "direita";
		
		var fila = [];
		fila.push("7-10");
		fila.push("8-10");
		fila.push("9-10");
		
		$("#7-10").addClass("preenchido");
		$("#8-10").addClass("preenchido");
		$("#9-10").addClass("preenchido");
	
		$(document).ready(function(){

			criarEstruturaTabela();
			
			setInterval(realizarMovimentos, 200);
			
			escutarEventosDoTeclado();
		});
			
		function escutarEventosDoTeclado(){
			
			$("body").on("keydown", function (e) {
				
				var tecla = (window.event) ? event.keyCode : e.which;
				
				if(tecla == 37 && direcao != "direita"){
					direcao = "esquerda";
				}
				if(tecla == 38 && direcao != "baixo"){
					direcao = "cima";
				}
				if(tecla == 39 && direcao != "esquerda"){
					direcao = "direita";
				}
				if(tecla == 40 && direcao != "cima"){
					direcao = "baixo";
				}
			});
		}
		
		function criarEstruturaTabela(){
			
			for(i=1 ; i<=larguraAlturaMaxima ; i++){
				
				$(".game-container").append("<tr>");
				
				for(j=1 ; j<=larguraAlturaMaxima ; j++){
					
					$(".game-container tr:last").append("<td>");
					$(".game-container td:last").addClass("quadradinho");
					$(".game-container td:last").attr("id", j + "-" + i);
				}
			}
		}
		
		function realizarMovimentos(){
			
			var eixoX = obterEixoX();
			var eixoY = obterEixoY();
			
			if(direcao == 'direita'){
				
				posicaoAtual = eixoX + 1 + '-' + eixoY;
			}
			
			if(direcao == 'esquerda'){
				
				posicaoAtual = eixoX - 1 + '-' + eixoY;
			}
			
			if(direcao == 'cima'){
				
				posicaoAtual = eixoX + '-' + (eixoY - 1);
			}
			
			if(direcao == 'baixo'){
				
				posicaoAtual = eixoX + '-' + (eixoY + 1);
			}
			
			verificarSePerdeu();

			$("#" + posicaoAtual).addClass("preenchido");
			fila.push(posicaoAtual);
			$("#" + fila.shift()).removeClass("preenchido");
		}
		
		function obterEixoX(){
			
			return parseInt(posicaoAtual.substring(0, posicaoAtual.indexOf("-")));
		}
		
		function obterEixoY(){
			
			return parseInt(posicaoAtual.substring(posicaoAtual.indexOf("-") + 1));
		}
		
		function verificarSePerdeu(){
			
			eixoX = obterEixoX();
			eixoY = obterEixoY();
			
			if(eixoX > larguraAlturaMaxima || eixoX < 1 || eixoY > larguraAlturaMaxima || eixoY < 1 || $("#" + posicaoAtual).hasClass("preenchido")){
				
				$(".game-container").hide();
				$("#perdeu-playboy").show();
			}
		}
	
	</script>
	
</html>